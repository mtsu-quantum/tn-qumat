{{ define "main" }}
<div class="max-w-6xl mx-auto px-4">
  <header class="mb-8 text-center">
    <h1 class="text-4xl font-bold mb-2">{{ .Title }}</h1>
    {{ with .Params.description }}
      <p class="text-lg text-gray-600 dark:text-gray-300">{{ . }}</p>
    {{ end }}
  </header>

  <!-- Tab navigation bar -->
  <nav class="mb-8 border-b pb-2 sticky top-0 bg-white dark:bg-gray-900 z-20">
    <ul class="flex space-x-4 overflow-x-auto">
      <li><a class="tab-link text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white" href="#overview">Overview</a></li>
      <li><a class="tab-link text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white" href="#topics">Schedule</a></li>
      <li><a class="tab-link text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white" href="#schedule">Speakers</a></li>
      <li><a class="tab-link text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white" href="#venue">Venue</a></li>
    </ul>
  </nav>

  <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
    <!-- Main content column -->
    <article class="prose lg:prose-lg dark:prose-invert max-w-none lg:col-span-2">
      {{ .Content }}
    </article>

    <!-- Sidebar (e.g. flyer) -->
    {{ with .Params.flyer_thumb }}
    <aside class="lg:col-span-1 lg:max-w-md mx-auto">
      <h2 class="text-xl font-semibold mb-4 text-center">Seminar Flyer</h2>
      <a href="{{ $.Params.flyer | relURL }}" target="_blank">
        <img src="{{ . | relURL }}"
             alt="Workshop Flyer Thumbnail"
             class="rounded-lg shadow-lg hover:scale-[1.02] transition-transform duration-200 w-full">
      </a>
      <p class="mt-3 text-sm text-center">
        <a href="{{ $.Params.flyer | relURL }}" 
           class="text-blue-600 dark:text-blue-400 hover:underline"
           target="_blank">
          Download Flyer (PDF)
        </a>
      </p>
    </aside>
    {{ end }}
  </div>
</div>

<script>
// Highlight active tab on scroll
document.addEventListener("DOMContentLoaded", function() {
  const tabLinks = document.querySelectorAll(".tab-link");
  const sections = Array.from(tabLinks).map(link => {
    const id = link.getAttribute("href").substring(1);
    return document.getElementById(id);
  });

  function onScroll() {
    const scrollPos = window.scrollY + 100; // offset for sticky nav
    for (let i = sections.length - 1; i >= 0; i--) {
      const sec = sections[i];
      if (sec && sec.offsetTop <= scrollPos) {
        tabLinks.forEach(link => link.classList.remove("font-semibold", "text-blue-600"));
        const activeLink = tabLinks[i];
        activeLink.classList.add("font-semibold", "text-blue-600");
        break;
      }
    }
  }

  window.addEventListener("scroll", onScroll);
  onScroll();
});
</script>

{{ end }}
